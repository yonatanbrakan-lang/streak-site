<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Streak Board</title>

<style>
:root{
    --bg:#f4f6f9;
    --card:#ffffff;
    --text:#1a1a1a;
    --accent:#4f46e5;
}

body.dark{
    --bg:#111827;
    --card:#1f2933;
    --text:#f9fafb;
    --accent:#6366f1;
}

body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    background:var(--bg);
    color:var(--text);
    transition:0.3s;
}

.container{
    max-width:700px;
    margin:auto;
    padding:20px;
}

.card{
    background:var(--card);
    border-radius:18px;
    padding:20px;
    margin-bottom:20px;
    box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

input,button{
    width:100%;
    padding:14px;
    margin-top:10px;
    border-radius:12px;
    border:none;
    font-size:16px;
}

input{
    background:#e5e7eb;
}

body.dark input{
    background:#374151;
    color:white;
}

button{
    background:var(--accent);
    color:white;
    font-weight:bold;
    cursor:pointer;
}

.person{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:15px;
    border-radius:12px;
    margin-top:10px;
    background:rgba(0,0,0,0.05);
    cursor:pointer;
    transition:0.2s;
}

body.dark .person{
    background:rgba(255,255,255,0.05);
}

.person:hover{
    transform:scale(1.02);
}

.topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}

.toggle{
    width:auto;
    padding:8px 14px;
}
</style>
</head>

<body>

<div class="container">

<div class="topbar">
<h2> Streak Board</h2>
<button class="toggle" onclick="toggleTheme()">Dark / Light</button>
</div>

<div id="auth" class="card">
<h3>专砖</h3>
<input id="name" placeholder="砖">
<input id="email" placeholder="">
<input id="pass" placeholder="住住">
<button onclick="register()">住</button>
</div>

<div id="app" style="display:none">

<div class="card">
<h3>住祝 </h3>
<input id="newPerson" placeholder="砖 ">
<button onclick="addPerson()">住祝</button>
</div>

<div class="card">
<h3></h3>
<div id="people"></div>
</div>

</div>
</div>

<script>
let data = JSON.parse(localStorage.getItem("streakApp")) || {
    user:null,
    people:[],
    theme:"light"
};

if(data.theme==="dark") document.body.classList.add("dark");

if(data.user){
    showApp();
}

function save(){
    localStorage.setItem("streakApp",JSON.stringify(data));
}

function register(){
    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const pass = document.getElementById("pass").value;

    if(!name || !email || !pass) return alert("转 ");

    data.user = {name,email};
    save();
    showApp();
}

function showApp(){
    document.getElementById("auth").style.display="none";
    document.getElementById("app").style.display="block";
    render();
}

function addPerson(){
    const name = document.getElementById("newPerson").value;
    if(!name) return;

    data.people.push({name,streak:0,wins:0});
    document.getElementById("newPerson").value="";
    save();
    render();
}

function addStreak(index){
    let p = data.people[index];
    p.streak++;

    if(p.streak % 10 === 0){
        p.wins++;
    }

    save();
    render();
}

function render(){
    const list = document.getElementById("people");
    list.innerHTML="";

    data.people.forEach((p,i)=>{
        const div = document.createElement("div");
        div.className="person";
        div.onclick=()=>addStreak(i);

        div.innerHTML = `
            <strong>${p.name}</strong>
            <span>
            Win ${p.wins} / ${p.streak % 10}
            </span>
        `;

        list.appendChild(div);
    });
}

function toggleTheme(){
    document.body.classList.toggle("dark");
    data.theme = document.body.classList.contains("dark") ? "dark":"light";
    save();
}
</script>

</body>
</html>
